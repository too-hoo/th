<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å£è¢‹è¡¥å…‰ç¯ Pro | ä¸“ä¸šç‰ˆ</title>
    <style>
        /* --- 1. åŸºç¡€è®¾ç½® --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html { height: 100%; width: 100%; overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: #000; }

        /* --- 2. å‘å…‰æ ¸å¿ƒå±‚ --- */
        /* ä¸»è‰²å±‚ (Base Color): ä½¿ç”¨ HSL é¢œè‰²æ¨¡å¼ */
        #light-base {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: hsl(0, 100%, 50%); /* é»˜è®¤çº¢è‰² */
            z-index: 1;
            transition: background-color 0.1s ease;
        }
        /* è‰²æ¸©å±‚ (Temperature Overlay): å åŠ åœ¨ä¸»è‰²å±‚ä¹‹ä¸Š */
        #light-temp {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: transparent; /* é»˜è®¤æ— è‰²æ¸©å åŠ  */
            z-index: 2;
            pointer-events: none; /* ç¡®ä¿ç‚¹å‡»äº‹ä»¶èƒ½ç©¿é€åˆ°ä¸‹é¢çš„å±‚ */
            transition: background-color 0.1s ease;
        }

        /* --- 3. æ§åˆ¶é¢æ¿ (ä»¿iOSé£æ ¼) --- */
        #controls-container {
            position: fixed;
            bottom: 20px; left: 50%;
            transform: translateX(-50%);
            width: 90%; max-width: 380px;
            z-index: 10;
            transition: opacity 0.3s, transform 0.3s;
        }
        /* éšè—çŠ¶æ€çš„æ ·å¼ */
        .hidden { opacity: 0; transform: translateX(-50%) translateY(20px); pointer-events: none; }

        #controls-box {
            background: rgba(30, 30, 30, 0.85); /* æ·±è‰²åŠé€æ˜èƒŒæ™¯ */
            backdrop-filter: blur(20px);         /* æ¯›ç»ç’ƒç‰¹æ•ˆ */
            -webkit-backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: 24px;
            color: #fff;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
        }

        /* --- 4. UI ç»„ä»¶æ ·å¼ --- */
        /* æ ‡é¢˜è¡Œ */
        .panel-header { font-size: 15px; font-weight: 600; text-align: center; margin-bottom: 18px; opacity: 0.9; letter-spacing: 0.5px; }
        
        /* å›¾æ ‡ + æ»‘å—è¡Œ */
        .slider-row {
            display: flex; align-items: center; gap: 12px; margin-bottom: 18px;
        }
        .slider-icon { font-size: 20px; width: 24px; text-align: center; opacity: 0.8; }

        /* æ»‘å—ç»Ÿä¸€æ ·å¼ (å»é™¤æµè§ˆå™¨é»˜è®¤æ ·å¼ï¼Œè‡ªå®šä¹‰è½¨é“å’Œæ»‘å—) */
        input[type=range] {
            -webkit-appearance: none; width: 100%; height: 26px; border-radius: 13px; outline: none; cursor: pointer;
        }
        
        /* --- æ»‘å—è½¨é“èƒŒæ™¯è‡ªå®šä¹‰ --- */
        /* è°ƒè‰²ç›˜è½¨é“ï¼šæ˜¾ç¤ºå…‰è°± */
        #hue-slider { background: linear-gradient(to right, #f00, #ff0, #0f0, #0ff, #00f, #f0f, #f00); }
        /* äº®åº¦è½¨é“ï¼šé»‘åˆ°ç™½ */
        #brightness-slider { background: linear-gradient(to right, #000, #fff); }
        /* è‰²æ¸©è½¨é“ï¼šå†·è“åˆ°æš–æ©™ */
        #temp-slider { background: linear-gradient(to right, #a3d1ff, #ffffff, #ffb347); }

        /* æ»‘å—æŠŠæ‰‹ (Thumb) æ ·å¼ */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none;
            width: 30px; height: 30px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 2px 6px rgba(0,0,0,0.4);
            border: 2px solid rgba(0,0,0,0.1);
        }

        /* --- 5. é¢œè‰²é¢„è®¾å¡ç‰‡ (Top Row) --- */
        .swatch-grid {
            display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px; margin-bottom: 24px;
        }
        .swatch {
            width: 100%; padding-bottom: 100%; /* ä¿æŒæ­£æ–¹å½¢æ¯”ä¾‹ */
            border-radius: 10px; cursor: pointer;
            box-shadow: inset 0 0 0 2px rgba(255,255,255,0); /* é»˜è®¤æ— è¾¹æ¡† */
            transition: transform 0.1s, box-shadow 0.2s;
            position: relative;
        }
        .swatch:active { transform: scale(0.92); }
        /* é€‰ä¸­çŠ¶æ€ï¼šå¢åŠ ç™½è‰²è¾¹æ¡† */
        .swatch.active { box-shadow: inset 0 0 0 3px #fff; }
        
        /* é¢„è®¾é¢œè‰²å®šä¹‰ (è«å…°è¿ªè‰²ç³» + å¸¸ç”¨è‰²) */
        /* ä½¿ç”¨ HSL å€¼: hsl(è‰²ç›¸, é¥±å’Œåº¦%, äº®åº¦%) */
        .s-1 { background: hsl(350, 40%, 80%); } /* è«å…°è¿ªç²‰ */
        .s-2 { background: hsl(210, 30%, 75%); } /* è«å…°è¿ªè“ */
        .s-3 { background: hsl(150, 25%, 80%); } /* è«å…°è¿ªç»¿ */
        .s-4 { background: hsl(40, 60%, 80%); }  /* æŸ”å’Œå¥¶é»„ */
        .s-5 { background: hsl(0, 0%, 100%); }   /* çº¯ç™½è¡¥å…‰ */
        .s-6 { background: linear-gradient(135deg, #ff9a9e, #fad0c4); } /* ç½‘çº¢è½æ—¥æ¸å˜ (ç‰¹æ®Šå¤„ç†) */

        /* --- 6. æ²‰æµ¸æ¨¡å¼æç¤ºä¸å¼€å…³ --- */
        #immersive-tip {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: rgba(255,255,255,0.4); font-size: 15px; pointer-events: none;
            opacity: 0; transition: opacity 0.3s; z-index: 5; text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        .tip-visible { opacity: 1 !important; }

        /* å…¨å±æŒ‰é’®å®¹å™¨ */
        #toggle-btn-container {
            text-align: center; margin-top: 15px;
        }
        /* å…¨å±æŒ‰é’®æ ·å¼ */
        .toggle-btn {
            background: rgba(255,255,255,0.15); color: #fff; border: none;
            padding: 12px 24px; border-radius: 24px; font-size: 15px; font-weight: 500;
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            display: inline-flex; align-items: center; gap: 8px; cursor: pointer;
            transition: background 0.2s;
        }
        .toggle-btn:active { background: rgba(255,255,255,0.25); }

    </style>
</head>
<body>
    <div id="light-base"></div> <div id="light-temp"></div> <div id="immersive-tip">è½»ç‚¹å±å¹•å”¤èµ·èœå•</div>

    <div id="controls-container">
        <div id="controls-box">
            <div class="panel-header">ä¸“ä¸šè¡¥å…‰æ§åˆ¶</div>

            <div class="swatch-grid">
                <div class="swatch s-1 active" data-hsl="350,40,80"></div>
                <div class="swatch s-2" data-hsl="210,30,75"></div>
                <div class="swatch s-3" data-hsl="150,25,80"></div>
                <div class="swatch s-4" data-hsl="40,60,80"></div>
                <div class="swatch s-5" data-hsl="0,0,100"></div>
                <div class="swatch s-6" data-is-sunset="true"></div>
            </div>

            <div class="slider-row">
                <div class="slider-icon" style="color: #ff6b81;">ğŸ¨</div>
                <input type="range" id="hue-slider" min="0" max="360" value="350">
            </div>

            <div class="slider-row">
                <div class="slider-icon" style="color: #feca57;">â˜€ï¸</div>
                <input type="range" id="brightness-slider" min="0" max="100" value="80">
            </div>

            <div class="slider-row">
                <div class="slider-icon" style="font-size: 16px; color: #54a0ff;">â„ï¸</div>
                <input type="range" id="temp-slider" min="0" max="100" value="50">
                <div class="slider-icon" style="font-size: 16px; color: #ff9f43;">ğŸ”¥</div>
            </div>
            
            <div style="text-align: center; font-size: 11px; opacity: 0.5; margin-top: 12px;">
                ğŸ’¡ æç¤º: è¯·æ‰‹åŠ¨å°†æ‰‹æœºå±å¹•äº®åº¦è°ƒè‡³æœ€é«˜ä»¥è·å¾—æœ€ä½³æ•ˆæœ
            </div>

        </div>
        
        <div id="toggle-btn-container">
            <button class="toggle-btn" id="fullscreen-btn">
                <span>ğŸ“º è¿›å…¥æ²‰æµ¸æ¨¡å¼ (å…¨å±)</span>
            </button>
        </div>
    </div>


    <script>
        // === è·å– DOM å…ƒç´  ===
        const lightBase = document.getElementById('light-base');
        const lightTemp = document.getElementById('light-temp');
        const controlsContainer = document.getElementById('controls-container');
        const immersiveTip = document.getElementById('immersive-tip');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        
        const hueSlider = document.getElementById('hue-slider');
        const brightnessSlider = document.getElementById('brightness-slider');
        const tempSlider = document.getElementById('temp-slider');
        const swatches = document.querySelectorAll('.swatch');

        // === çŠ¶æ€å˜é‡ ===
        // é»˜è®¤é¢œè‰²çŠ¶æ€ (å¯¹åº”ç¬¬ä¸€ä¸ªè«å…°è¿ªç²‰è‰²å¡)
        let currentHue = 350;
        let currentSat = 40; // é¥±å’Œåº¦
        let currentLight = 80; // äº®åº¦
        let isSunsetMode = false; // æ˜¯å¦æ˜¯è½æ—¥æ¨¡å¼
        let isImmersive = false;  // æ˜¯å¦æ˜¯æ²‰æµ¸æ¨¡å¼
        let wakeLock = null;      // å±å¹•å¸¸äº®é”å¯¹è±¡

        // === æ ¸å¿ƒåŠŸèƒ½å‡½æ•° ===

        // 1. æ›´æ–°ç¯å…‰ (æ ¹æ®å½“å‰çš„ HSL å’Œè‰²æ¸©çŠ¶æ€åˆ·æ–°å±å¹•æ˜¾ç¤º)
        function updateLight() {
            // --- å¤„ç†ä¸»è‰²å±‚ ---
            if (isSunsetMode) {
                // å¦‚æœæ˜¯è½æ—¥æ¨¡å¼ï¼Œç›´æ¥è®¾ç½®æ¸å˜èƒŒæ™¯
                lightBase.style.background = 'linear-gradient(135deg, #ff9a9e, #fad0c4)';
            } else {
                // å¦åˆ™ï¼Œä½¿ç”¨ HSL é¢œè‰²å€¼æ‹¼æ¥: hsl(è‰²ç›¸, é¥±å’Œåº¦%, äº®åº¦%)
                const color = `hsl(${currentHue}, ${currentSat}%, ${currentLight}%)`;
                lightBase.style.background = color;
            }

            // --- å¤„ç†è‰²æ¸©å±‚ (ç‹¬ç«‹äºé¢œè‰²å åŠ ) ---
            const tempValue = parseInt(tempSlider.value);
            // 50 ä¸ºä¸­æ€§ç‚¹
            if (tempValue < 50) {
                // å‘å·¦æ»‘åŠ¨ï¼šå˜å†· (å åŠ å¤©è“è‰²ï¼Œé€æ˜åº¦éšè·ç¦»å¢åŠ )
                const opacity = (50 - tempValue) / 50 * 0.5; // æœ€å¤§ 50% é€æ˜åº¦
                lightTemp.style.background = `rgba(135, 206, 235, ${opacity})`;
            } else if (tempValue > 50) {
                // å‘å³æ»‘åŠ¨ï¼šå˜æš– (å åŠ æ©™è‰²ï¼Œé€æ˜åº¦éšè·ç¦»å¢åŠ )
                const opacity = (tempValue - 50) / 50 * 0.5; // æœ€å¤§ 50% é€æ˜åº¦
                lightTemp.style.background = `rgba(255, 165, 0, ${opacity})`;
            } else {
                // ä¸­é—´ä½ç½®ï¼šæ— å åŠ 
                lightTemp.style.background = 'transparent';
            }
            
            // æ›´æ–°æ²‰æµ¸æ¨¡å¼æç¤ºæ–‡å­—çš„é¢œè‰²ï¼Œç¡®ä¿åœ¨äº®/æš—èƒŒæ™¯ä¸‹éƒ½å¯è§
            // ç®€å•é€»è¾‘ï¼šå¦‚æœäº®åº¦å¤§äº 60ï¼Œæç¤ºæ–‡å­—ç”¨æ·±è‰²ï¼Œå¦åˆ™ç”¨æµ…è‰²
            immersiveTip.style.color = currentLight > 60 ? 'rgba(0,0,0,0.4)' : 'rgba(255,255,255,0.5)';
        }

        // 2. å¤„ç†é¢„è®¾è‰²å¡ç‚¹å‡»äº‹ä»¶
        swatches.forEach(swatch => {
            swatch.addEventListener('click', function() {
                // ç§»é™¤æ‰€æœ‰è‰²å¡çš„æ¿€æ´»çŠ¶æ€ï¼Œæ¿€æ´»å½“å‰ç‚¹å‡»çš„
                swatches.forEach(s => s.classList.remove('active'));
                this.classList.add('active');

                // æ£€æŸ¥æ˜¯å¦æ˜¯ç‰¹æ®Šçš„è½æ—¥æ¨¡å¼
                if (this.dataset.isSunset === "true") {
                    isSunsetMode = true;
                    // ç¦ç”¨è°ƒè‰²ç›˜å’Œäº®åº¦æ»‘å—ï¼Œå› ä¸ºæ¸å˜æ¨¡å¼ä¸‹è¿™äº›ä¸å¯è°ƒ
                    setSlidersDisabled(true);
                } else {
                    // æ™®é€šé¢œè‰²æ¨¡å¼
                    isSunsetMode = false;
                    // å¯ç”¨æ»‘å—
                    setSlidersDisabled(false);

                    // ä» data-hsl å±æ€§ä¸­è¯»å–é¢„è®¾çš„ "H,S,L" å€¼
                    const hslValues = this.dataset.hsl.split(',');
                    currentHue = parseInt(hslValues[0]);
                    currentSat = parseInt(hslValues[1]);
                    currentLight = parseInt(hslValues[2]);

                    // åŒæ­¥æ›´æ–°æ»‘å—çš„ä½ç½®åˆ°é¢„è®¾å€¼
                    hueSlider.value = currentHue;
                    brightnessSlider.value = currentLight;
                }
                // åº”ç”¨æ›´æ–°
                updateLight();
            });
        });

        // è¾…åŠ©å‡½æ•°ï¼šç¦ç”¨/å¯ç”¨ Hue å’Œ Brightness æ»‘å—çŠ¶æ€
        function setSlidersDisabled(disabled) {
            hueSlider.disabled = disabled;
            brightnessSlider.disabled = disabled;
            // é€šè¿‡é€æ˜åº¦å˜åŒ–ç»™äºˆè§†è§‰åé¦ˆ
            const opacity = disabled ? 0.4 : 1;
            hueSlider.parentElement.style.opacity = opacity;
            brightnessSlider.parentElement.style.opacity = opacity;
        }

        // 3. å¤„ç†æ»‘å—æ‹–åŠ¨äº‹ä»¶
        // è°ƒè‰²ç›˜ (Hue) æ»‘åŠ¨
        hueSlider.addEventListener('input', (e) => {
            currentHue = e.target.value;
            // é‡è¦ï¼šæ‹–åŠ¨è°ƒè‰²ç›˜æ—¶ï¼Œå°†é¥±å’Œåº¦æ¢å¤åˆ°è¾ƒé«˜çš„é²œè‰³çŠ¶æ€
            // (å¦åˆ™å¦‚æœåœ¨è«å…°è¿ªè‰²(ä½é¥±å’Œ)åŸºç¡€ä¸Šæ‹–åŠ¨ï¼Œé¢œè‰²ä¼šå¾ˆç°)
            currentSat = 85; 
            // å–æ¶ˆæ‰€æœ‰é¢„è®¾å¡ç‰‡çš„é€‰ä¸­çŠ¶æ€ï¼Œå› ä¸ºç°åœ¨æ˜¯è‡ªå®šä¹‰é¢œè‰²
            swatches.forEach(s => s.classList.remove('active'));
            isSunsetMode = false;
            updateLight();
        });

        // äº®åº¦ (Lightness) æ»‘åŠ¨
        brightnessSlider.addEventListener('input', (e) => {
            currentLight = e.target.value;
            // å¦‚æœåœ¨è½æ—¥æ¨¡å¼ä¸‹è¯¯è§¦äº®åº¦æ¡ï¼Œé€€å‡ºè½æ—¥æ¨¡å¼å¹¶é‡ç½®é¥±å’Œåº¦
            if (isSunsetMode) {
                isSunsetMode = false;
                currentSat = 85;
                swatches.forEach(s => s.classList.remove('active'));
                setSlidersDisabled(false);
            }
            updateLight();
        });

        // è‰²æ¸© (Temperature) æ»‘åŠ¨
        tempSlider.addEventListener('input', (e) => {
            // è‰²æ¸©æ˜¯ç‹¬ç«‹çš„å åŠ å±‚ï¼Œç›´æ¥æ›´æ–°å³å¯
            updateLight();
        });

        // === äº¤äº’ä¸åŠŸèƒ½ ===

        // åˆ‡æ¢æ²‰æµ¸æ¨¡å¼ (æ˜¾ç¤º/éšè—é¢æ¿å¹¶å…¨å±)
        function toggleImmersiveMode() {
            isImmersive = !isImmersive;
            if (isImmersive) {
                // è¿›å…¥æ²‰æµ¸ï¼šéšè—é¢æ¿ï¼Œæ˜¾ç¤ºæç¤ºï¼Œå…¨å±ï¼Œç”³è¯·å¸¸äº®
                controlsContainer.classList.add('hidden');
                immersiveTip.classList.add('tip-visible');
                enterFullScreen();
                requestWakeLock();
                // 3ç§’åè‡ªåŠ¨éšè—æç¤ºæ–‡å­—
                setTimeout(() => {
                    immersiveTip.classList.remove('tip-visible');
                }, 3000);
            } else {
                // é€€å‡ºæ²‰æµ¸ï¼šæ˜¾ç¤ºé¢æ¿ï¼Œéšè—æç¤ºï¼Œé€€å‡ºå…¨å±
                controlsContainer.classList.remove('hidden');
                immersiveTip.classList.remove('tip-visible');
                exitFullScreen();
            }
        }

        // ç‚¹å‡»å…¨å±æŒ‰é’®
        fullscreenBtn.addEventListener('click', toggleImmersiveMode);

        // ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®é€€å‡ºæ²‰æµ¸æ¨¡å¼ (æ’é™¤æ§åˆ¶é¢æ¿åŒºåŸŸ)
        document.body.addEventListener('click', (e) => {
            // å¦‚æœç‚¹å‡»çš„æ˜¯æ§åˆ¶é¢æ¿å†…éƒ¨ï¼Œåˆ™ä¸æ‰§è¡Œé€€å‡ºé€»è¾‘
            if (controlsContainer.contains(e.target)) return;
            
            // åªæœ‰åœ¨æ²‰æµ¸æ¨¡å¼ä¸‹ç‚¹å‡»æ‰è§¦å‘é€€å‡º
            if (isImmersive) {
                toggleImmersiveMode();
            }
        });

        // å±å¹•å¸¸äº® API (æ ¸å¿ƒåŠŸèƒ½ï¼Œéœ€è¦ HTTPS ç¯å¢ƒ)
        async function requestWakeLock() {
            if ('wakeLock' in navigator) {
                try {
                    wakeLock = await navigator.wakeLock.request('screen');
                    console.log('å±å¹•å¸¸äº®å·²æ¿€æ´»');
                } catch (err) { console.error('å¸¸äº®æ¿€æ´»å¤±è´¥:', err); }
            }
        }
        // å½“ç”¨æˆ·åˆ‡æ¢åº”ç”¨é‡æ–°å›åˆ°é¡µé¢æ—¶ï¼Œå°è¯•å†æ¬¡æ¿€æ´»å¸¸äº® (é˜²æ­¢å¤±æ•ˆ)
        document.addEventListener('visibilitychange', async () => {
            if (wakeLock !== null && document.visibilityState === 'visible') {
                requestWakeLock();
            }
        });

        // æµè§ˆå™¨å…¨å± API çš„å…¼å®¹å†™æ³•
        function enterFullScreen() {
            const docElm = document.documentElement;
            if (docElm.requestFullscreen) { docElm.requestFullscreen(); }
            else if (docElm.webkitRequestFullScreen) { docElm.webkitRequestFullScreen(); }
        }
        function exitFullScreen() {
            if (document.exitFullscreen) { document.exitFullscreen(); }
            else if (document.webkitExitFullscreen) { document.webkitExitFullscreen(); }
        }

        // === åˆå§‹åŒ–æ‰§è¡Œ ===
        updateLight(); // é¡µé¢åŠ è½½æ—¶åº”ç”¨é»˜è®¤çŠ¶æ€

    </script>
</body>
</html>